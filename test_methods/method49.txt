[[[public Writer createWriter() {
    if (writer != null) {
        return writer;
    } else {
        assert stream != null;
        return new OutputStreamWriter(stream);
    }
}]]],